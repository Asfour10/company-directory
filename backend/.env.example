# =============================================================================
# COMPANY DIRECTORY - BACKEND ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and update the values for your environment
# Never commit .env files to version control

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
NODE_ENV=development
PORT=3000
HOST=0.0.0.0

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# CORS Configuration
ENABLE_CORS=true
CORS_ORIGIN=http://localhost:5173

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL connection string
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/company_directory?schema=public&connection_limit=20&pool_timeout=20

# Database connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_POOL_TIMEOUT=20000

# Database SSL (for production)
DB_SSL_MODE=prefer
DB_SSL_CERT=
DB_SSL_KEY=
DB_SSL_ROOT_CERT=

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production-min-32-chars
JWT_EXPIRES_IN=8h
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-in-production-min-32-chars
JWT_REFRESH_EXPIRES_IN=7d

# Session Configuration
SESSION_SECRET=your-session-secret-change-in-production-min-32-chars
SESSION_TIMEOUT=28800000

# Password Requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# ENCRYPTION CONFIGURATION
# =============================================================================
# Field-level encryption
ENCRYPTION_KEY=your-32-character-encryption-key!!
ENCRYPTION_ALGORITHM=aes-256-gcm

# Database encryption at rest
DB_ENCRYPTION_ENABLED=false
DB_ENCRYPTION_ALGORITHM=AES-256
DB_KEY_ROTATION_DAYS=90

# Key Management Service
ENCRYPTION_PROVIDER=local
AWS_KMS_KEY_ID=
AZURE_KEY_VAULT_URL=
AZURE_KEY_NAME=

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
# HTTPS Configuration
HTTPS_ENABLED=false
HTTPS_PORT=3443
SSL_KEY_PATH=
SSL_CERT_PATH=
SSL_CA_PATH=
ENFORCE_HTTPS=false

# TLS Version
TLS_MIN_VERSION=1.2
TLS_MAX_VERSION=1.3

# =============================================================================
# FILE STORAGE CONFIGURATION
# =============================================================================
# File upload settings
MAX_FILE_SIZE=2097152
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp
UPLOAD_PATH=uploads

# AWS S3 Configuration
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_S3_BUCKET=company-directory-uploads
AWS_S3_REGION=us-east-1

# Azure Blob Storage (alternative to S3)
AZURE_STORAGE_ACCOUNT=
AZURE_STORAGE_KEY=
AZURE_STORAGE_CONTAINER=uploads

# =============================================================================
# SSO PROVIDER CONFIGURATION
# =============================================================================
# Azure AD SSO
AZURE_AD_CLIENT_ID=your-azure-client-id
AZURE_AD_CLIENT_SECRET=your-azure-client-secret
AZURE_AD_TENANT_ID=your-azure-tenant-id
AZURE_AD_CALLBACK_URL=http://localhost:3000/api/auth/sso/azure/callback

# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:3000/api/auth/sso/google/callback

# Okta
OKTA_DOMAIN=your-okta-domain.okta.com
OKTA_CLIENT_ID=your-okta-client-id
OKTA_CLIENT_SECRET=your-okta-client-secret
OKTA_CALLBACK_URL=http://localhost:3000/api/auth/sso/okta/callback

# JumpCloud
JUMPCLOUD_CLIENT_ID=your-jumpcloud-client-id
JUMPCLOUD_CLIENT_SECRET=your-jumpcloud-client-secret
JUMPCLOUD_CALLBACK_URL=http://localhost:3000/api/auth/sso/jumpcloud/callback

# =============================================================================
# SCIM CONFIGURATION
# =============================================================================
# SCIM API Authentication
SCIM_BEARER_TOKEN=your-scim-bearer-token-change-in-production
SCIM_ENDPOINT_PREFIX=/scim/v2

# =============================================================================
# BILLING & SUBSCRIPTION CONFIGURATION
# =============================================================================
# Stripe Configuration
STRIPE_SECRET_KEY=your-stripe-secret-key
STRIPE_PUBLISHABLE_KEY=your-stripe-publishable-key
STRIPE_WEBHOOK_SECRET=your-stripe-webhook-secret
STRIPE_PRICE_ID_BASIC=price_basic_plan_id
STRIPE_PRICE_ID_PREMIUM=price_premium_plan_id
STRIPE_PRICE_ID_ENTERPRISE=price_enterprise_plan_id

# Subscription Limits
BASIC_PLAN_USER_LIMIT=50
PREMIUM_PLAN_USER_LIMIT=500
ENTERPRISE_PLAN_USER_LIMIT=10000

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
# SMTP Configuration
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-smtp-user
SMTP_PASSWORD=your-smtp-password
SMTP_FROM=noreply@company-directory.com
SMTP_FROM_NAME=Company Directory

# Email Templates
EMAIL_TEMPLATE_PATH=templates/emails

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Prometheus Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
READINESS_CHECK_PATH=/ready

# APM Configuration
APM_ENABLED=false
APM_SERVICE_NAME=company-directory-backend
APM_SERVICE_VERSION=1.0.0

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
# Cache TTL Settings (in seconds)
CACHE_TTL_EMPLOYEE_PROFILE=300
CACHE_TTL_SEARCH_RESULTS=300
CACHE_TTL_TENANT_CONFIG=3600
CACHE_TTL_SESSION=28800

# =============================================================================
# AUDIT & COMPLIANCE CONFIGURATION
# =============================================================================
# Audit Log Configuration
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=730
AUDIT_LOG_EXPORT_ENABLED=true

# GDPR Configuration
GDPR_ENABLED=true
DATA_RETENTION_DAYS=2555
DATA_EXPORT_ENABLED=true
DATA_DELETION_ENABLED=true

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================
# Development flags
DEBUG_MODE=false
ENABLE_SWAGGER=true
ENABLE_PLAYGROUND=false

# Test Configuration
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/company_directory_test
TEST_REDIS_URL=redis://localhost:6379/1

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Feature toggles
FEATURE_ANALYTICS=true
FEATURE_CUSTOM_FIELDS=true
FEATURE_BULK_IMPORT=true
FEATURE_SCIM=true
FEATURE_BILLING=true
FEATURE_ENCRYPTION=false
FEATURE_GDPR=true
